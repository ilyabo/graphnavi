import type { NextPage } from "next";
import Head from "next/head";
import { useEffect, useState } from "react";
import { getDuckConn } from "../lib/useDuckConn";
import { ChakraProvider, Flex, Heading, Spacer, Text } from "@chakra-ui/react";
import MainView from "../components/MainView";
import "react-mosaic-component/react-mosaic-component.css";
import theme from "../theme";
import GraphView from "../components/GraphView";

const Home: NextPage = () => {
  // const duckConn = useDuckConn();
  const [mounted, setMounted] = useState(false);
  useEffect(() => {
    // Pre-load DuckDB so that datasets load faster
    setMounted(true);
    getDuckConn();
  }, []);

  if (!mounted) {
    return null;
  }
  return (
    <ChakraProvider theme={theme}>
      <Head>
        <title>GraphNAVI</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <Flex
        position={"absolute"}
        direction={"column"}
        top={0}
        left={0}
        width={"100vw"}
        height={"100vh"}
        gap={1}
      >
        <Flex
          width={"100%"}
          as={"header"}
          px={5}
          pt={3}
          mx={"auto"}
          // maxW={"6xl"}
        >
          <Flex direction={"row"} alignItems={"center"} gap={5}>
            <Heading fontSize="2xl" display={"flex"}>
              <Text color={"gray.500"}>Graph</Text>
              <Text color={"gray.100"}>NAVI</Text>
            </Heading>
            <Text fontSize="xs" color={"gray.500"}>
              Network analysis and visualization tool
            </Text>
          </Flex>
          <Spacer />
          {/*<a*/}
          {/*  href="https://www.duckdb.org"*/}
          {/*  target="_blank"*/}
          {/*  rel="noopener noreferrer"*/}
          {/*>*/}
          {/*  <Flex alignItems="center" gap={2}>*/}
          {/*    <Text fontSize={"xs"}>Powered by DuckDB</Text>*/}
          {/*    <Image*/}
          {/*      src="/duckdb.svg"*/}
          {/*      alt="DuckDB Logo"*/}
          {/*      width={30}*/}
          {/*      height={30}*/}
          {/*    />*/}
          {/*  </Flex>*/}
          {/*</a>*/}
        </Flex>

        <Flex as={"main"} w={"100vw"} height={"100%"}>
          <MainView isOpen={true} onClose={console.log} />
        </Flex>
      </Flex>
    </ChakraProvider>
  );
};

export default Home;
